<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>申請退換貨</title>
    <style>
        button {
            padding: 5px 10px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }

        button:disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        textarea {
            width: 100%;
            height: 50px;
        }
    </style>
</head>
<body>
<h1>申請退換貨</h1>

<!-- 訂單詳情表格 -->
<table border="1">
    <thead>
        <tr>
            <th>商品 ID</th>
            <th>商品名稱</th>
            <th>數量</th>
            <th>價格</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="detail : ${orderDetails}">
            <td th:text="${detail.productId}">商品ID</td>
            <td th:text="${detail.productName}">商品名稱</td>
            <td th:text="${detail.qty}">數量</td>
            <td th:text="${detail.price}">價格</td>
            <td>
                <!-- 每個商品的退換貨申請表單 -->
                <form th:action="@{/product/return/add}" method="post" onsubmit="disableButton(this)">
                    <input type="hidden" name="orderId" th:value="${orderId}"/>
                    <input type="hidden" name="prdName" th:value="${detail.productName}"/>

                    <label for="reason">原因：</label>
                    <textarea name="reason" placeholder="輸入退換貨原因" rows="2" required></textarea>

                    <label for="type">類型：</label>
                    <select name="type" required>
                        <option value="1">退貨</option>
                        <option value="2">換貨</option>
                    </select>

                    <label for="refund">退款金額：</label>
                    <input type="number" name="refund" min="0" required/>

                    <!-- 按鈕 -->
                    <button type="submit" class="submit-btn">申請</button>
                </form>
            </td>
        </tr>
    </tbody>
</table>

<!-- JavaScript -->
<script>
    function disableButton(form) {
        // 找到當前表單內的按鈕，設置為禁用
        const button = form.querySelector('.submit-btn');
        button.disabled = true;
        button.textContent = '已申請';
    }
</script>
</body>
</html>
